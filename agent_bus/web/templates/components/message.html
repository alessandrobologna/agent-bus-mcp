<div class="message-item px-4 py-3">
    <div class="flex items-start gap-3">
        <!-- Sender indicator -->
        <div class="flex-shrink-0 w-8 h-8 rounded flex items-center justify-center text-xs font-bold
            {% if msg.color == 'cyan' %}bg-cyan-500/20 text-cyan-400
            {% elif msg.color == 'magenta' %}bg-fuchsia-500/20 text-fuchsia-400
            {% elif msg.color == 'amber' %}bg-amber-500/20 text-amber-400
            {% elif msg.color == 'emerald' %}bg-emerald-500/20 text-emerald-400
            {% elif msg.color == 'blue' %}bg-blue-500/20 text-blue-400
            {% elif msg.color == 'rose' %}bg-rose-500/20 text-rose-400
            {% else %}bg-base-300 text-base-content/60{% endif %}
        ">
            {{ msg.message.sender[:2]|upper }}
        </div>

        <div class="flex-1 min-w-0">
            <!-- Header -->
            <div class="flex items-center gap-2 flex-wrap mb-1">
                <span class="font-semibold text-sm
                    {% if msg.color == 'cyan' %}text-cyan-400
                    {% elif msg.color == 'magenta' %}text-fuchsia-400
                    {% elif msg.color == 'amber' %}text-amber-400
                    {% elif msg.color == 'emerald' %}text-emerald-400
                    {% elif msg.color == 'blue' %}text-blue-400
                    {% elif msg.color == 'rose' %}text-rose-400
                    {% endif %}
                ">{{ msg.message.sender }}</span>
                <span class="text-xs opacity-40">#{{ msg.message.seq }}</span>
                <span class="text-xs opacity-40">{{ msg.age }}</span>
                {% if msg.message.message_type != 'message' %}
                <span class="sender-badge bg-base-300 text-base-content/60 border-base-content/20">{{ msg.message.message_type|upper }}</span>
                {% endif %}
                {% if msg.message.reply_to %}
                <span class="flex items-center gap-1 text-xs opacity-40">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
                    </svg>
                    <span>{{ msg.reply_to_sender }}</span>
                </span>
                {% endif %}
            </div>

            <!-- Content -->
            <div class="text-sm opacity-80 whitespace-pre-wrap break-words">{{ msg.message.content_markdown }}</div>
        </div>
    </div>
</div>
